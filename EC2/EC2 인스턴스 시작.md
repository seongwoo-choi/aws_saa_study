# EC2 인스턴스 시작

EC2 인스턴스가 가상 서버라는 것을 알 수 있었다.

지금까지 한 방식은 온디맨드 방식이다.

온디맨드 방식은 필요할 때 인스턴스를 바로 생성해서 사용할 수 있는 방식으로 1시간 단위로 이루어지며 1분을 사용했더라도 1시간으로 책정되어 모든 방식 중에 가장 요금이 비싸다.

만약 서버를 엄청 오랫동안 켜놓아야 하는 경우엔 온디맨드 방식을 사용할 경우 요금 폭탄을 맞게 될 것이다.

온디맨드 방식에는 아래와 같은 두가지 방식이 존재한다.

- 공유 인스턴스(Shared tenancy): 하나의 물리적인 서버에 여러 개의 EC2 인스턴스가 실행된다. 다른 인스턴스가 서버 자원을 많이 소모한다면 현재 인스턴스의 성능에 영향이 있을 수 있다.
- 전용 인스턴스(Dedicated tenancy): 하나의 물리적인 서버에 하나의 EC2 인스턴스가 실행된다. 서버 내에 다른 인스턴스가 없으므로 성능에 영향을 미치지 않는다. 공유 인스턴스 방식보다 비용이 비싸다.

이를 방지하기 위한 몇가지 방식들이 있다.

첫번째로 Reserved Instance 를 사용하는 것이다.

일정한 예약금을 선불로 내면 인스턴스를 1년 또는 3년 동안 예약할 수 있으며 시간당 요금이 대폭 할인된다. 

온 디맨드 인스턴스와 마찬가지로 공유 인스턴스, 전용 인스턴스로 나뉜다.

- Light 사용률 예약 인스턴스: 모든 예약 인스턴스 중에서 선결제 금액이 가장 저렴. 이 인스턴스 유형은 사용 시간이 많지 않을 때 유용하다. 즉 하루 종일 사용하지 않고, 1년 중 몇 달 사용하지 않는 개발 및 테스트와 단기 프로젝트에 적합.

- Medium 사용률 예약 인스턴스: Light보다 선결제 금액은 비싸지만 시간당 요금이 저렴하다. 이 인스턴스 유형은 거의 항상 실행하지만 사용량에 약간의 변화가 있을 때 유용하다.

- Heavy 사용률 예약 인스턴스: Medium보다 선결제 금액은 비싸지만 모든 예약 인스턴스 중에서 시간당 요금이 가장 저렴하다. 이 인스턴스 유형은 24시간 상시 가동되어야 하는 출시된 제품에 유용하다.


두번쨰로 Spot Instance 를 사용하는 것이다.

경매 방식의 인스턴스이다.

인스턴스의 스펙을 설정하고 원하는 가격을 입력하여 입찰하면 수요와 공급에 따라 가격이 결정되고 높게 입찰한 사람한테 인스턴스가 할당된다. 

해당 스펙의 인스턴스를 다른 사람이 더 높은 가격으로 입찰했다면 내가 가지고 있는 인스턴스는 종료된다. 

스팟 인스턴스는 다음과 같은 상황에 적합하다.

클러스터링으로 이루어지는 분석 작업, 이미지 변환, 비디오 렌더링, 웹 크롤링, 각종 테스트 등 기타 불시에 중단되어도 상관 없는 업무






