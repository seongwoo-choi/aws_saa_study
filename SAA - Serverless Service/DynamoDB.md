# DynamoDB

- DynamoDB 는 서버리스 데이터베이스로 가용성이 아주 높아서 데이터가 자동으로 여러 가용 영역에 복제된다.
- NoSQL 데이터베이스이며 분산형 데이터베이스라서 수평 확장을 한다.
- 하나의 테이블 내에서 초당 수백만 건을 처리할 수 있고 행이 거의 무제한이며 수백 TB 에 다르는 스토리지가 있다.
- 성능이 빠르고 일관적이어서 프로비저닝을 많이 할 필요가 없다.
- 데이터 회수 속도도 매우 빠르다.
- DynamoDB API 는 IAM 과 완전 통합되어 보안, 권한, 관리가 매우 편하다.
- DynamoDB 스트림으로 이벤트 기반 프로그래밍을 활성화할 수 있다.

### DynamoDB - Basics

- 기본적으로 테이블로 구성되어 있으며 완전 관리형 서비스이기 때문에 테이블만 생성해서 사용하면 된다.
- 각 테이블에 기본 키가 있고 기본 키는 테이블 생성 시 결정되야 한다.
- 각 테이블의 행이 무한해서 프로비저닝할 스토리지가 없다.
- 테이블의 컬럼(열)은 실시간으로 추가가 가능하며 언제든지 정의할 수 있다.
- DynamoDB 의 최대 행 크기는 400KB 이다. 용량이 큰 객체를 저장하기에는 좋지 않다.
- String, Number, Binary, Boolean, List, Map, String Set, Number Set, Binary Set 타입을 사용할 수 있다.

### DynamoDB - Read/Write Capacity Modes

- DynamoDB 는 서버를 프로비저닝할 필요가 없고 테이블이 필요로 하는 읽기, 쓰기 용량만 정의하면 된다.
- 프로비전 모드
  - 테이블을 생성할 때 초당 읽기 횟수와 쓰기 횟수를 미리 지정한다. 사전에 용량을 계획하기 때문에 프로비저닝한 만큼 비용이 청구된다.
  - 즉, 읽기 용량 단위인 RCU 와 쓰기 용량 단위인 WCU 를 미리 프로비저닝하고 매달 프로비저닝한 RCU, WCU 의 값만큼 비용이 청구된다.
  - 프로비전 모드에서 오토 스케일링을 사용할 수 있다. 내가 원하는 평균 사용량이 RCU 70%, WCU 70% 일 경우 DynamoDB 는 테이블의 부하에 따라 자동으로 WCU, RCU 를 스케일링 한다.
  - 보통 DynamoDB 에 얼마만큼 트래픽이 들어올 지 예측할 수 있는 경우에 사용한다.
- 온디맨드 모드
  - RCU, WCU 가 없고 미리 세팅할 필요 없이 사용한 만큼 비용이 나간다.
  - 프로비전 모드에 비해 유연한 대신 비용이 훨씬 더 비싸다.
  - 주로 예측 불가능한 워크 로드에서 사용한다. 
  - 테이블이 비활성화 상태일 때는 비용이 나가지 않는다. 